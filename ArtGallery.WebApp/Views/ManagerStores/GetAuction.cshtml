@model IEnumerable<ArtGallery.Data.Entities.Auction>
@using ArtGallery.Data.Entities
@{
    Layout = "_Layout";
    ViewData["Title"] = "Gallery";
}
    <!--middle content-->
    <div id="container">
        <div class="container">
            <div class="row">
                <!--left sidebar---->
                <aside class="col-sm-3 left-sidebar">
                    <div class="box category">
                        <div class="box-heading">
                            <h3>@ViewData["Title"]<i class="fa fa-angle-up"></i></h3>
                        </div>
                        <div class="box-content test">
                            <div class="box-category">
                                <ul class="menu">
                                    <li><a asp-action="GetAuction" asp-controller="ManagerStores" class="custom_hover">Auction</a></li>
                                    <li><a asp-action="CreateAuction" asp-controller="ManagerStores" class="custom_hover"> Add Auctions</a></li>
                                    <li><a asp-action="GetProduct" asp-controller="ManagerStores" class="custom_hover">Product</a></li>
                                    <li><a asp-action="CreateProduct" asp-controller="ManagerStores" class="custom_hover">Add Products</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </aside>
                <!--end sidebar-->
                <!--main content-->
                @*masager*@
                @if (TempData["msgauction"] != null)
                {
                    <div id="msg" class="alert alert-success" role="alert" style="width:500px; margin:auto">
                        @TempData["msgauction"]
                    </div>
                }
                <div class="col-sm-9 single-product" id="content">
                    <ul class="breadcrumb">
                        <li><a asp-action="Home" asp-controller="Home"><i class="fa fa-home"></i></a></li>
                        <li><a asp-action="GetProduct" asp-controller="ManagerStores">@ViewData["Title"]</a></li>
                    </ul>
                    <!--related product-->
                    <div class="box related-product-heading margin-top">
                        <div class="table-responsive">
                            <table class="table table-light mb-0">
                                <thead>
                                    <tr>
                                        <th class="col-3">Product Name</th>
                                        <th class="col-3">StartingPrice</th>
                                        <th class="col-4">Description</th>
                                        <th class="col-1">StartDateTime</th>
                                        <th class="col-4">EndDateTime</th>
                                        <th class="col-3">Action</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    @{
                                        if (Model.ToList().Count != 0)
                                        {
                                            @foreach (var item in Model)
                                            {
                                                <tr>
                                                    <td class="text-bold-500">@item.Product.Title</td>
                                                    <td class="text-bold-500; text-danger">@item.StartingPrice$</td>
                                                    <td class="text-bold-500; text-danger">@item.PriceStep$</td>
                                                    <td class="text-bold-500">@item.StartDateTime</td>
                                                    <td class="text-bold-500">@item.EndDateTime</td>
                                                    @foreach (ProductImage img in item.Product.ProductImages)
                                                    {
                                                        if (img.Thumbnail == true)
                                                        {
                                                            <td>
                                                                <img src="@Url.Content(img.ImagePath)" style="width:100px; height:auto;">
                                                            </td>
                                                        }
                                                    }
                                                    @if (item.StartDateTime < DateTime.Now || item.EndDateTime < DateTime.Now)
                                                    {
                                                        <td>
                                                            <span class="text-danger">
                                                                Auction room has ended
                                                            </span>
                                                        </td>
                                                    }
                                                    else
                                                    {
                                                        <td>
                                                            <span onclick="return confirm('Are you sure want to delete this data ?')">
                                                                <a asp-action="DeleteAuction" asp-controller="ManagerStores" asp-route-id="@item.Id">Delete</a>&nbsp;|
                                                            </span>
                                                            @*<input type="button" asp-controller="CategoryManager" asp-action="" asp-route="@item.Id" class="btn btn-danger" value="Delete" name="alertMsg" id="btnAlertMsg" onclick="myFunction()" />*@
                                                            <a asp-action="UpdateAuction" asp-controller="ManagerStores" asp-route-id="@item.Id">Update</a>
                                                        </td>
                                                    }

                                                </tr>
                                            }
                                        }
                                        else
                                        {
                                            <tr><th><h4>There Are No Auction Rooms Available !</h4></th></tr>

                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--end-->
                </div>
                <!--end main content-->
            </div>
        </div>
    </div>
    <!--End of middle content-->
    <script>
    let noOfCharac = 24;
    let contents = document.querySelectorAll(".content");
    contents.forEach(content => {
        //If text length is less that noOfCharac... then hide the read more button
        if (content.textContent.length < noOfCharac) {
            content.nextElementSibling.style.display = "none";
        }
        else {
            let displayText = content.textContent.slice(0, noOfCharac);
            let moreText = content.textContent.slice(noOfCharac);
            content.innerHTML = `${displayText}<span class="dots">...</span><span class="hide more">${moreText}</span>`;
        }
    });

    function readMore(btn) {
        let post = btn.parentElement;
    }
    </script>
    <script>
        setTimeout(function () {

            $('#msg').fadeOut('slow');
        }, 2000);
    </script>
